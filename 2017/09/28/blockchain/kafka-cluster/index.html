

<!DOCTYPE html>
<html lang="zh">
<!--begin head-->

<head>
    <meta charset="utf-8">
<!--begin title-->

<title>
    
    搭建Kafka集群 |
    
    Blog of Scheme</title>
<!--end title-->
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<!--begin mete-->

<meta name="description" content="Blog of Scheme, misc things of computer"/>

<meta name="author" content="Scheme J"/>

<!--end mete-->
<!--begin keywords-->
<meta name="keywords" content="blockchain,cluster,composer,fabric,geth,hyperledge,hyperledger,proxmox,start,test"/>
<!--end keywords-->
<!--begin rss-->

<link rel="alternate" href="/atom.xml" title="Blog of Scheme" type="application/atom+xml">

<!--end rss-->
<!--begin favicon-->

<link rel="icon" href="/favicon.ico">

<!--end favicon-->
<!--begin style-->

<!-- stylesheets list from config.yml -->

<link rel="stylesheet" href="/css/hannah.css">


<!--end style-->
<meta name="generator" content="Hexo 4.2.1"></head>
<!--end head-->
<!--begin body-->

<body class="container-fluid">

    <!--begin menu-->
    <div class="hannah-menu">
    <i class="fh fh-ravelry fa-2x btn fixed-menu animated bounce" id="btn_menu" aria-hidden="true"></i>
    <div class="menu-outer container-fluid hide animated" id="div_menu">
        <div class="row" style="margin-bottom: 5px;">
            
            <div class="col-md-offset-2 col-md-3 col-xs-4 text-center left-social">
                
                <a target="_blank" href="https://github.com/marryton007" title="GitHub"><i class="fh fh-github"></i></a>
                
                <style>
                    .left-social {
                        height: 132px;
                        line-height: 132px;
                        font-size: 66px;
                    }

                    .left-social * {
                        color: #f1ce8e;
                    }

                    @media (max-width: 767px) {
                        .left-social {
                            line-height: 132px;
                            font-size: 33px;
                        }
                    }
                </style>
            </div>
            <!--begin handImg-->
            <div class="col-md-2 col-xs-4 text-center">
                
                <img src="/img/logo.png" alt="Head Image" class="img-circle">
                
            </div>
            <!--end handImg-->
            <div class="col-md-3 col-xs-4 text-center right-social">
                
                <style>
                    .right-social {
                        height: 132px;
                        line-height: 132px;
                        font-size: 66px;
                    }

                    @media (max-width: 767px) {
                        .right-social {
                            line-height: 132px;
                            font-size: 33px;
                        }
                    }

                    .right-social * {
                        color: #f1ce8e;
                    }
                </style>
            </div>
        </div>
        <div class="row">
            <div class="menu-content col-md-8 col-md-push-2 col-xs-12 ">
                <dl class="menu-content-item">
                    <dt class="menu-content-title">
                        <i class="fh fh-bars" aria-hidden="true"></i> Menu
                    </dt>
                    <dd class="menu-content-content">
                        
                        <div class="col-md-4 col-xs-6 col-sm-4 text-center animated tada">
                            <a href="/" class="btn btn-block">
                                
                                <i class="fh fh-ravelry"></i>
                                Home
                            </a>
                        </div>
                        
                        <div class="col-md-4 col-xs-6 col-sm-4 text-center animated tada">
                            <a href="/categories" class="btn btn-block">
                                
                                <i class="fh fh-cubes"></i>
                                Category
                            </a>
                        </div>
                        
                        <div class="col-md-4 col-xs-6 col-sm-4 text-center animated tada">
                            <a href="/tags" class="btn btn-block">
                                
                                <i class="fh fh-tags"></i>
                                Tag
                            </a>
                        </div>
                        
                        <div class="col-md-4 col-xs-6 col-sm-4 text-center animated tada">
                            <a href="/archives" class="btn btn-block">
                                
                                <i class="fh fh-archive"></i>
                                Archives
                            </a>
                        </div>
                        
                        <div class="col-md-4 col-xs-6 col-sm-4 text-center animated tada">
                            <a href="/about" class="btn btn-block">
                                
                                <i class="fh fh-about"></i>
                                About
                            </a>
                        </div>
                        
                        <div class="col-md-4 col-xs-6 col-sm-4 text-center animated tada">
                            <a href="/doc" class="btn btn-block">
                                
                                <i class="fh fh-document"></i>
                                Doc
                            </a>
                        </div>
                        
                        <div class="col-md-4 col-xs-6 col-sm-4 text-center animated tada">
                            <a href="/plug" class="btn btn-block">
                                
                                <i class="fh fh-plug"></i>
                                Plug
                            </a>
                        </div>
                        
                        <div class="col-md-4 col-xs-6 col-sm-4 text-center animated tada">
                            <a href="/sitemap" class="btn btn-block">
                                
                                <i class="fh fh-sitemap"></i>
                                SiteMap
                            </a>
                        </div>
                        
                        <div class="col-md-4 col-xs-6 col-sm-4 text-center animated tada">
                            <a href="/atom.xml" class="btn btn-block">
                                <i class="fh fh-rss" aria-hidden="true"></i> RSS
                            </a>
                        </div>
                    </dd>
                </dl>
            </div>
        </div>
        <div class="row">
            <div class="menu-content col-md-8 col-md-offset-2 col-xs-12 ">
                <dl class="col-md-6 col-xs-6 menu-content-item">
                    <dt class="menu-content-title">
                        <i class="fh fh-cubes" aria-hidden="true"></i> Category
                    </dt>
                    <dd class="menu-content-content animated zoomIn">
                        <ul class="menu-cate-list"><li class="menu-cate-list-item"><a class="menu-cate-list-link" href="/categories/blockchain/"><i class="fh fh-cube" aria-hidden="true"></i> blockchain</a><span class="menu-cate-list-count">7</span></li><li class="menu-cate-list-item"><a class="menu-cate-list-link" href="/categories/cluster/"><i class="fh fh-cube" aria-hidden="true"></i> cluster</a><span class="menu-cate-list-count">1</span></li><li class="menu-cate-list-item"><a class="menu-cate-list-link" href="/categories/code/"><i class="fh fh-cube" aria-hidden="true"></i> code</a><span class="menu-cate-list-count">1</span></li><li class="menu-cate-list-item"><a class="menu-cate-list-link" href="/categories/web%E5%89%8D%E7%AB%AF/"><i class="fh fh-cube" aria-hidden="true"></i> web前端</a><span class="menu-cate-list-count">1</span></li></ul>
                    </dd>
                </dl>
                <dl class="col-md-6 col-xs-6 menu-content-item">
                    <dt class="menu-content-title">
                        <i class="fh fh-tag" aria-hidden="true"></i> Tags
                    </dt>
                    <dd class="menu-content-content animated zoomIn">
                        <ul class="menu-tag-list" itemprop="keywords"><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/blockchain/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> blockchain</a><span class="menu-tag-list-count">9</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/cluster/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> cluster</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/composer/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> composer</a><span class="menu-tag-list-count">3</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/fabric/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> fabric</a><span class="menu-tag-list-count">2</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/geth/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> geth</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/hyperledge/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> hyperledge</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/hyperledger/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> hyperledger</a><span class="menu-tag-list-count">5</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/proxmox/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> proxmox</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/start/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> start</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/test/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> test</a><span class="menu-tag-list-count">1</span></li></ul>
                    </dd>
                </dl>
            </div>
        </div>
    </div>
</div>
    <!--end menu-->

    <div class="row hannah-body">
        <div class="col-md-8 col-md-push-2 col-xs-12">
            <!--begin breadcrumb-->
            <div class="bread-crumb">
    <ul class="bread-crumb-menu animated rubberBand">
        <li><a href="/"><i class="fh fh-ravelry" aria-hidden="true"></i> Home</a></li>
        
        <li><a href="/categories/blockchain/"><i class="fh fh-cube" aria-hidden="true"></i> blockchain</a>
        </li>
        
        <li>
            
            <i class="fh fh-newspaper-o" aria-hidden="true"></i>
            
            搭建Kafka集群
        </li>
        
    </ul>
    <div class="bread-crumb-search">
        <div class="search">
    <i class="fh fh-search icon-search"></i>
    <input placeholder="Search ..." onkeyup="searchFunc(this,event,'/search.xml')"
           class="input-search animated fadeInRight"/>
    <div class="search-result animated fadeInRight">
        <a class="animated tada col-lg-12 search-result-item result-link" href="/2020/06/08/test/">test</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2018/12/08/fabric/peer-process/">Hyperledge fabric peer 流程分析</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2018/11/08/proxmox/proxmox-setup/">proxmox 集群搭建</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2018/04/22/blockchain/composer-k8s-fabric-deploy/">使用composer+k8s部署hyperledger fabric 1.1.0</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2018/04/13/blockchain/geth-json-rpc/">以太坊节点geth json rpc使用指南</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2017/09/28/blockchain/kafka-cluster/">搭建Kafka集群</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2017/09/04/blockchain/hyperledger-composer-learn/">hyperledger composer 实战</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2017/08/24/blockchain/fabric-transaction-flow/">hyperledger fabric交易流程</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2017/08/23/blockchain/first-fabric-application/">基于hyperledger fabric网络的第一个应用</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2017/08/22/blockchain/build-first-fabric-network/">使用hyperledger fabric构建你的第一个区块链网络</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2017/08/18/blockchain/blockchain-describe/">白话区块链</a>
    </div>
</div>
    </div>
</div>
            <!--end breadcrumb-->
            <!--begin body-->
            <article class="post animated rollIn">
    <h1 class="post-title">搭建Kafka集群</h1>
    <div class="post-subtitle">
        
        <time datetime="2017-09-28T06:17:39.000Z" class="item">
            <i class="fh fh-calendar" aria-hidden="true"></i>&nbsp;&nbsp;2017-09-28
        </time>
        
        
        <span class="item">
      <i class="fh fh-cubes" aria-hidden="true"></i>&nbsp;
            
            <a class="label label-primary tags" href="/categories/blockchain/">
           <i class="fh fh-cube" aria-hidden="true"></i>&nbsp;blockchain
        </a>
            
        </span>
        
        
        <span class="item">
        <i class="fh fh-tags" aria-hidden="true"></i>&nbsp;
            
            <a class="label label-info tags" href="/tags/blockchain/">
            <i class="fh fh-tag" aria-hidden="true"></i>&nbsp;blockchain
            </a>
            
            <a class="label label-info tags" href="/tags/hyperledger/">
            <i class="fh fh-tag" aria-hidden="true"></i>&nbsp;hyperledger
            </a>
            
            <a class="label label-info tags" href="/tags/composer/">
            <i class="fh fh-tag" aria-hidden="true"></i>&nbsp;composer
            </a>
            
        </span>
        
    </div>
    
    <ol>
<li><h4 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h4><p>因为<a href="https://www.hyperledger.org/projects/fabric" target="_blank" rel="noopener">Hyperledger Fabric</a>使用<a href="https://kafka.apache.org/" target="_blank" rel="noopener">Apache Kafka</a>来作为期 Orderer Service 的实现，所以在研究<a href="https://www.hyperledger.org/projects/fabric" target="_blank" rel="noopener">Fabric</a>的时候，也来尝试搭建一个<a href="https://kafka.apache.org/" target="_blank" rel="noopener">kafka</a>集群。</p>
</li>
<li><h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><p><a href="https://kafka.apache.org/" target="_blank" rel="noopener">Kafka</a>是由 LinkedIn 开发的一个分布式的消息系统，使用 Scala 编写，它以可水平扩展和高吞吐率而被广泛使用，其依赖于<a href="https://zookeeper.apache.org/" target="_blank" rel="noopener">ZooKeeper</a>。<br><a href="https://zookeeper.apache.org/" target="_blank" rel="noopener">ZooKeeper</a>是一个分布式的，开放源码的分布式应用程序协调服务，它是一个为分布式应用提供一致性服务的软件，提供的功能包括：配置维护、域名服务、分布式同步、组服务等。<br><a href="https://www.ansible.com/" target="_blank" rel="noopener">Ansible</a>是一款简单的自动化 IT 工具。这个工具的目标有这么几项：自动化部署 APP；自动化管理配置项；自动化的持续交互；自动化的（AWS）云服务管理。即可以批量的在远程服务器上通过 SSH 执行命令，且无须额外在服务器上安装控制工具。</p>
</li>
<li><h4 id="硬件环境"><a href="#硬件环境" class="headerlink" title="硬件环境"></a>硬件环境</h4><ul>
<li>3 台 Ubuntu 16.04 机器</li>
<li>1 台 Mac，作为控制机</li>
</ul>
</li>
<li><h4 id="初始配置"><a href="#初始配置" class="headerlink" title="初始配置"></a>初始配置</h4><ul>
<li>3 台 Ubuntu 机器配置 ssh 服务，创建 deploy 用户(自定)，允许 deploy 用户无密码 sudo</li>
<li>Mac 上安装<a href="https://www.ansible.com/" target="_blank" rel="noopener">ansible</a>，设置从 Mac 用户无密码登录 Ubuntu 机器</li>
</ul>
</li>
<li><h4 id="关键步骤"><a href="#关键步骤" class="headerlink" title="关键步骤"></a>关键步骤</h4><ul>
<li><p>在 Mac 上配置<a href="https://www.ansible.com/" target="_blank" rel="noopener">Ansible</a>主机列表</p>
<ul>
<li><p>查看~/.ansible.cfg</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[defaults]</span><br><span class="line">hostfile&#x3D;~&#x2F;.hosts    &#x2F;&#x2F;host文件位置</span><br><span class="line">hash_behaviour &#x3D; merge</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改~/.hosts, 添加如下内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[kafka]</span><br><span class="line">devops0</span><br><span class="line">devops2</span><br><span class="line">devops1</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改/etc/hosts 文件，添加如下内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">192.168.1.208   devops0</span><br><span class="line">192.168.1.207   devops1</span><br><span class="line">192.168.1.209   devops2</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>在 Ubuntu 机器上安装 JAVA</p>
<ul>
<li>编写 ansible playbook 文件 install-jdk.yml<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">- hosts: kafka</span><br><span class="line">  user: deploy</span><br><span class="line">  become: yes</span><br><span class="line">  become_user: root</span><br><span class="line">  tasks:</span><br><span class="line">    - name: install some packages</span><br><span class="line">      apt:</span><br><span class="line">        name: &quot;&#123;&#123;item&#125;&#125;&quot;</span><br><span class="line">        state: present</span><br><span class="line">      with_items:</span><br><span class="line">        - openjdk-8-jdk</span><br></pre></td></tr></table></figure></li>
<li>执行<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ansible-playbook install-jdk.yml</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>在 Ubuntu 机器上配置<a href="https://zookeeper.apache.org/" target="_blank" rel="noopener">Zookeeper</a>集群</p>
<ul>
<li><p>安装 zookeeper role</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ansible-galaxy install AnsibleShipyard.ansible-zookeeper</span><br></pre></td></tr></table></figure></li>
<li><p>编写 playbook 文件 zookeeper-cluster.yml</p>


       <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">- name: Installing ZooKeeper</span><br><span class="line">  hosts: kafka</span><br><span class="line">  user: deploy</span><br><span class="line">  become: yes</span><br><span class="line">  become_user: root</span><br><span class="line">  roles:</span><br><span class="line">    - role: AnsibleShipyard.ansible-zookeeper</span><br><span class="line">      zookeeper_hosts: &quot;</span><br><span class="line">        &#123;%- set ips &#x3D; [] %&#125;</span><br><span class="line">        &#123;%- for host in groups[&#39;kafka&#39;] %&#125;</span><br><span class="line">        &#123;&#123;- ips.append(dict(id&#x3D;loop.index, host&#x3D;host, ip&#x3D;hostvars[host][&#39;ansible_default_ipv4&#39;].address)) &#125;&#125;</span><br><span class="line">        &#123;%- endfor %&#125;</span><br><span class="line">        &#123;&#123;- ips -&#125;&#125;&quot;</span><br></pre></td></tr></table></figure>

       


</li>
</ul>
</li>
</ul>
</li>
</ol>
<pre><code>- 执行

  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ansible-playbook zookeeper-cluster.yml</span><br></pre></td></tr></table></figure></code></pre><ul>
<li><p>在 ubuntu 机器上配置<a href="https://kafka.apache.org/" target="_blank" rel="noopener">Kafka</a>集群</p>
<ul>
<li><p>安装 kafka role</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ansible-galaxy install  idealista.kafka-role</span><br></pre></td></tr></table></figure></li>
<li><p>编写 playbook 文件， kafaka.yml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">- hosts: kafka</span><br><span class="line">  user: deploy</span><br><span class="line">  become: yes</span><br><span class="line">  roles:</span><br><span class="line">    - role: idealista.kafka-role</span><br><span class="line">      kafka_hosts:</span><br><span class="line">        - host: devops0</span><br><span class="line">          id: 1</span><br><span class="line">        - host: devops1</span><br><span class="line">          id: 2</span><br><span class="line">        - host: devops2</span><br><span class="line">          id: 3</span><br><span class="line">      kafka_zookeeper_hosts:</span><br><span class="line">        - 192.168.1.207:2181</span><br><span class="line">        - 192.168.1.208:2181</span><br><span class="line">        - 192.168.1.209:2181</span><br><span class="line"></span><br><span class="line">  environment:</span><br><span class="line">    http_proxy: http:&#x2F;&#x2F;192.168.2.59:1087</span><br><span class="line">    https_proxy: http:&#x2F;&#x2F;192.168.2.59:1087</span><br></pre></td></tr></table></figure>
</li>
<li><p>执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ansible-playbook kafka.yml</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ol start="6">
<li><h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h4><ul>
<li><p>zookeeper 测试</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 查看节点状态</span><br><span class="line">deploy@devops2:&#x2F;opt&#x2F;zookeeper-3.4.9&#x2F;bin$ .&#x2F;zkServer.sh status</span><br><span class="line">ZooKeeper JMX enabled by default</span><br><span class="line">Using config: &#x2F;opt&#x2F;zookeeper-3.4.9&#x2F;bin&#x2F;..&#x2F;conf&#x2F;zoo.cfg</span><br><span class="line">Mode: leader  &#x2F;&#x2F;节点角色</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 发送stat指令</span><br><span class="line">deploy@devops2:&#x2F;opt&#x2F;zookeeper-3.4.9&#x2F;bin$ echo stat |nc localhost 2181</span><br><span class="line">Zookeeper version: 3.4.9-1757313, built on 08&#x2F;23&#x2F;2016 06:50 GMT</span><br><span class="line">Clients:</span><br><span class="line"> &#x2F;0:0:0:0:0:0:0:1:54100[0](queued&#x3D;0,recved&#x3D;1,sent&#x3D;0)</span><br><span class="line"></span><br><span class="line">Latency min&#x2F;avg&#x2F;max: 0&#x2F;0&#x2F;33</span><br><span class="line">Received: 6353</span><br><span class="line">Sent: 6369</span><br><span class="line">Connections: 1</span><br><span class="line">Outstanding: 0</span><br><span class="line">Zxid: 0x1000001b2</span><br><span class="line">Mode: leader</span><br><span class="line">Node count: 32</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 使用.&#x2F;zkCli.sh 连接到zookeeper</span><br><span class="line">deploy@devops2:&#x2F;opt&#x2F;zookeeper-3.4.9&#x2F;bin$ .&#x2F;zkCli.sh -server localhost</span><br><span class="line">Connecting to localhost</span><br><span class="line">2017-09-28 10:02:24,947 [myid:] - INFO  [main:Environment@100] - Client environment:zookeeper.version&#x3D;3.4.9-1757313, built on 08&#x2F;23&#x2F;2016 06:50 GMT</span><br><span class="line">2017-09-28 10:02:24,949 [myid:] - INFO  [main:Environment@100] - Client environment:host.name&#x3D;devops2</span><br><span class="line">2017-09-28 10:02:24,949 [myid:] - INFO  [main:Environment@100] - Client environment:java.version&#x3D;1.8.0_131</span><br><span class="line">2017-09-28 10:02:24,950 [myid:] - INFO  [main:Environment@100] - Client environment:java.vendor&#x3D;Oracle Corporation</span><br><span class="line">2017-09-28 10:02:24,950 [myid:] - INFO  [main:Environment@100] - Client environment:java.home&#x3D;&#x2F;usr&#x2F;local&#x2F;jre1.8.0_131</span><br><span class="line">2017-09-28 10:02:24,950 [myid:] - INFO  [main:Environment@100] - Client environment:java.class.path&#x3D;&#x2F;opt&#x2F;zookeeper-3.4.9&#x2F;bin&#x2F;..&#x2F;build&#x2F;classes:&#x2F;opt&#x2F;zookeeper-3.4.9&#x2F;bin&#x2F;..&#x2F;build&#x2F;lib&#x2F;*.jar:&#x2F;opt&#x2F;zookeeper-3.4.9&#x2F;bin&#x2F;..&#x2F;lib&#x2F;slf4j-log4j12-1.6.1.jar:&#x2F;opt&#x2F;zookeeper-3.4.9&#x2F;bin&#x2F;..&#x2F;lib&#x2F;slf4j-api-1.6.1.jar:&#x2F;opt&#x2F;zookeeper-3.4.9&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-3.10.5.Final.jar:&#x2F;opt&#x2F;zookeeper-3.4.9&#x2F;bin&#x2F;..&#x2F;lib&#x2F;log4j-1.2.16.jar:&#x2F;opt&#x2F;zookeeper-3.4.9&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jline-0.9.94.jar:&#x2F;opt&#x2F;zookeeper-3.4.9&#x2F;bin&#x2F;..&#x2F;zookeeper-3.4.9.jar:&#x2F;opt&#x2F;zookeeper-3.4.9&#x2F;bin&#x2F;..&#x2F;src&#x2F;java&#x2F;lib&#x2F;*.jar:&#x2F;opt&#x2F;zookeeper-3.4.9&#x2F;bin&#x2F;..&#x2F;conf:</span><br><span class="line">2017-09-28 10:02:24,950 [myid:] - INFO  [main:Environment@100] - Client environment:java.library.path&#x3D;&#x2F;usr&#x2F;java&#x2F;packages&#x2F;lib&#x2F;amd64:&#x2F;usr&#x2F;lib64:&#x2F;lib64:&#x2F;lib:&#x2F;usr&#x2F;lib</span><br><span class="line">2017-09-28 10:02:24,951 [myid:] - INFO  [main:Environment@100] - Client environment:java.io.tmpdir&#x3D;&#x2F;tmp</span><br><span class="line">2017-09-28 10:02:24,951 [myid:] - INFO  [main:Environment@100] - Client environment:java.compiler&#x3D;&lt;NA&gt;</span><br><span class="line">2017-09-28 10:02:24,951 [myid:] - INFO  [main:Environment@100] - Client environment:os.name&#x3D;Linux</span><br><span class="line">2017-09-28 10:02:24,951 [myid:] - INFO  [main:Environment@100] - Client environment:os.arch&#x3D;amd64</span><br><span class="line">2017-09-28 10:02:24,951 [myid:] - INFO  [main:Environment@100] - Client environment:os.version&#x3D;4.4.0-72-generic</span><br><span class="line">2017-09-28 10:02:24,951 [myid:] - INFO  [main:Environment@100] - Client environment:user.name&#x3D;deploy</span><br><span class="line">2017-09-28 10:02:24,951 [myid:] - INFO  [main:Environment@100] - Client environment:user.home&#x3D;&#x2F;home&#x2F;deploy</span><br><span class="line">2017-09-28 10:02:24,951 [myid:] - INFO  [main:Environment@100] - Client environment:user.dir&#x3D;&#x2F;opt&#x2F;zookeeper-3.4.9&#x2F;bin</span><br><span class="line">2017-09-28 10:02:24,952 [myid:] - INFO  [main:ZooKeeper@438] - Initiating client connection, connectString&#x3D;localhost sessionTimeout&#x3D;30000 watcher&#x3D;org.apache.zookeeper.ZooKeeperMain$MyWatcher@531d72ca</span><br><span class="line">Welcome to ZooKeeper!</span><br><span class="line">2017-09-28 10:02:24,967 [myid:] - INFO  [main-SendThread(localhost:2181):ClientCnxn$SendThread@1032] - Opening socket connection to server localhost&#x2F;0:0:0:0:0:0:0:1:2181. Will not attempt to authenticate using SASL (unknown error)</span><br><span class="line">JLine support is enabled</span><br><span class="line">2017-09-28 10:02:25,013 [myid:] - INFO  [main-SendThread(localhost:2181):ClientCnxn$SendThread@876] - Socket connection established to localhost&#x2F;0:0:0:0:0:0:0:1:2181, initiating session</span><br><span class="line">[zk: localhost(CONNECTING) 0] 2017-09-28 10:02:25,043 [myid:] - INFO  [main-SendThread(localhost:2181):ClientCnxn$SendThread@1299] - Session establishment complete on server localhost&#x2F;0:0:0:0:0:0:0:1:2181, sessionid &#x3D; 0x25ebcbe589d000d, negotiated timeout &#x3D; 30000</span><br><span class="line"></span><br><span class="line">WATCHER::</span><br><span class="line"></span><br><span class="line">WatchedEvent state:SyncConnected type:None path:null</span><br><span class="line"></span><br><span class="line">[zk: localhost(CONNECTED) 0] ls &#x2F;</span><br><span class="line">[cluster, controller_epoch, controller, brokers, zookeeper, admin, isr_change_notification, consumers, config]</span><br><span class="line">[zk: localhost(CONNECTED) 2] ls &#x2F;brokers&#x2F;ids</span><br><span class="line">[1, 2, 3]</span><br><span class="line">[zk: localhost(CONNECTED) 3] ls &#x2F;brokers&#x2F;topics</span><br><span class="line">[mytopic]</span><br><span class="line">[zk: localhost(CONNECTED) 4] ls &#x2F;brokers&#x2F;topics</span><br><span class="line">[mytopic, second]</span><br><span class="line">[zk: localhost(CONNECTED) 5]</span><br></pre></td></tr></table></figure>
</li>
<li><p>kafka 测试</p>
<ul>
<li><p>创建主题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">deploy@devops0:&#x2F;opt&#x2F;kafka&#x2F;bin$ .&#x2F;kafka-topics.sh --create --zookeeper 192.168.1.207:2181 --replication-factor 2 --partitions 1 --topic second</span><br><span class="line"></span><br><span class="line">Created topic &quot;second&quot;.</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 查看zookeeper中kafka的内容</span><br><span class="line">deploy@devops0:&#x2F;opt&#x2F;zookeeper-3.4.9&#x2F;bin$ .&#x2F;zkCli.sh  -server localhost</span><br><span class="line">Connecting to localhost</span><br><span class="line">2017-09-28 10:11:32,907 [myid:] - INFO  [main:Environment@100] - Client environment:zookeeper.version&#x3D;3.4.9-1757313, built on 08&#x2F;23&#x2F;2016 06:50 GMT</span><br><span class="line">2017-09-28 10:11:32,909 [myid:] - INFO  [main:Environment@100] - Client environment:host.name&#x3D;devops0</span><br><span class="line">2017-09-28 10:11:32,909 [myid:] - INFO  [main:Environment@100] - Client environment:java.version&#x3D;1.8.0_131</span><br><span class="line">2017-09-28 10:11:32,911 [myid:] - INFO  [main:Environment@100] - Client environment:java.vendor&#x3D;Oracle Corporation</span><br><span class="line">2017-09-28 10:11:32,911 [myid:] - INFO  [main:Environment@100] - Client environment:java.home&#x3D;&#x2F;usr&#x2F;local&#x2F;jre1.8.0_131</span><br><span class="line">2017-09-28 10:11:32,911 [myid:] - INFO  [main:Environment@100] - Client environment:java.class.path&#x3D;&#x2F;opt&#x2F;zookeeper-3.4.9&#x2F;bin&#x2F;..&#x2F;build&#x2F;classes:&#x2F;opt&#x2F;zookeeper-3.4.9&#x2F;bin&#x2F;..&#x2F;build&#x2F;lib&#x2F;*.jar:&#x2F;opt&#x2F;zookeeper-3.4.9&#x2F;bin&#x2F;..&#x2F;lib&#x2F;slf4j-log4j12-1.6.1.jar:&#x2F;opt&#x2F;zookeeper-3.4.9&#x2F;bin&#x2F;..&#x2F;lib&#x2F;slf4j-api-1.6.1.jar:&#x2F;opt&#x2F;zookeeper-3.4.9&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-3.10.5.Final.jar:&#x2F;opt&#x2F;zookeeper-3.4.9&#x2F;bin&#x2F;..&#x2F;lib&#x2F;log4j-1.2.16.jar:&#x2F;opt&#x2F;zookeeper-3.4.9&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jline-0.9.94.jar:&#x2F;opt&#x2F;zookeeper-3.4.9&#x2F;bin&#x2F;..&#x2F;zookeeper-3.4.9.jar:&#x2F;opt&#x2F;zookeeper-3.4.9&#x2F;bin&#x2F;..&#x2F;src&#x2F;java&#x2F;lib&#x2F;*.jar:&#x2F;opt&#x2F;zookeeper-3.4.9&#x2F;bin&#x2F;..&#x2F;conf:</span><br><span class="line">2017-09-28 10:11:32,911 [myid:] - INFO  [main:Environment@100] - Client environment:java.library.path&#x3D;&#x2F;usr&#x2F;java&#x2F;packages&#x2F;lib&#x2F;amd64:&#x2F;usr&#x2F;lib64:&#x2F;lib64:&#x2F;lib:&#x2F;usr&#x2F;lib</span><br><span class="line">2017-09-28 10:11:32,911 [myid:] - INFO  [main:Environment@100] - Client environment:java.io.tmpdir&#x3D;&#x2F;tmp</span><br><span class="line">2017-09-28 10:11:32,911 [myid:] - INFO  [main:Environment@100] - Client environment:java.compiler&#x3D;&lt;NA&gt;</span><br><span class="line">2017-09-28 10:11:32,911 [myid:] - INFO  [main:Environment@100] - Client environment:os.name&#x3D;Linux</span><br><span class="line">2017-09-28 10:11:32,911 [myid:] - INFO  [main:Environment@100] - Client environment:os.arch&#x3D;amd64</span><br><span class="line">2017-09-28 10:11:32,911 [myid:] - INFO  [main:Environment@100] - Client environment:os.version&#x3D;4.4.0-72-generic</span><br><span class="line">2017-09-28 10:11:32,911 [myid:] - INFO  [main:Environment@100] - Client environment:user.name&#x3D;deploy</span><br><span class="line">2017-09-28 10:11:32,912 [myid:] - INFO  [main:Environment@100] - Client environment:user.home&#x3D;&#x2F;home&#x2F;deploy</span><br><span class="line">2017-09-28 10:11:32,912 [myid:] - INFO  [main:Environment@100] - Client environment:user.dir&#x3D;&#x2F;opt&#x2F;zookeeper-3.4.9&#x2F;bin</span><br><span class="line">2017-09-28 10:11:32,912 [myid:] - INFO  [main:ZooKeeper@438] - Initiating client connection, connectString&#x3D;localhost sessionTimeout&#x3D;30000 watcher&#x3D;org.apache.zookeeper.ZooKeeperMain$MyWatcher@446cdf90</span><br><span class="line">Welcome to ZooKeeper!</span><br><span class="line">2017-09-28 10:11:32,927 [myid:] - INFO  [main-SendThread(localhost:2181):ClientCnxn$SendThread@1032] - Opening socket connection to server localhost&#x2F;0:0:0:0:0:0:0:1:2181. Will not attempt to authenticate using SASL (unknown error)</span><br><span class="line">JLine support is enabled</span><br><span class="line">2017-09-28 10:11:32,967 [myid:] - INFO  [main-SendThread(localhost:2181):ClientCnxn$SendThread@876] - Socket connection established to localhost&#x2F;0:0:0:0:0:0:0:1:2181, initiating session</span><br><span class="line">[zk: localhost(CONNECTING) 0] 2017-09-28 10:11:33,007 [myid:] - INFO  [main-SendThread(localhost:2181):ClientCnxn$SendThread@1299] - Session establishment complete on server localhost&#x2F;0:0:0:0:0:0:0:1:2181, sessionid &#x3D; 0x15ebcbe5acc0029, negotiated timeout &#x3D; 30000</span><br><span class="line"></span><br><span class="line">WATCHER::</span><br><span class="line"></span><br><span class="line">WatchedEvent state:SyncConnected type:None path:null</span><br><span class="line"></span><br><span class="line">[zk: localhost(CONNECTED) 0] ls &#x2F;</span><br><span class="line">[cluster, controller_epoch, controller, brokers, zookeeper, admin, isr_change_notification, consumers, config]</span><br><span class="line">[zk: localhost(CONNECTED) 1] ls &#x2F;brokers</span><br><span class="line">[ids, topics, seqid]</span><br><span class="line">[zk: localhost(CONNECTED) 2] ls &#x2F;brokers&#x2F;ids</span><br><span class="line">[1, 2, 3]</span><br><span class="line">[zk: localhost(CONNECTED) 3] ls &#x2F;brokers&#x2F;topics</span><br><span class="line">[mytopic, second]</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建生产者</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">deploy@manashare:&#x2F;opt&#x2F;kafka&#x2F;bin$ .&#x2F;kafka-console-producer.sh --broker-list 192.168.1.208:9092 --topic mytopic</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 以下为命令行输入内容，每次换行将消息发到主题中</span><br><span class="line">hello</span><br><span class="line">world</span><br><span class="line">this is a test</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建消费者</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">deploy@devops0:&#x2F;opt&#x2F;kafka&#x2F;bin$ .&#x2F;kafka-console-consumer.sh --zookeeper localhost:2181 --topic mytopic</span><br><span class="line">Using the ConsoleConsumer with old consumer is deprecated and will be removed in a future major release. Consider using the new consumer by passing [bootstrap-server] instead of [zookeeper].</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 以下内容是从主题中接收到消息</span><br><span class="line">hello</span><br><span class="line">world</span><br><span class="line">this is a test</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看主题列表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy@devops0:&#x2F;opt&#x2F;kafka&#x2F;bin$ .&#x2F;kafka-topics.sh --list --zookeeper localhost:2181</span><br><span class="line">&#x2F;&#x2F; 以下为主题列表</span><br><span class="line">mytopic</span><br><span class="line">second</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><h4 id="TIPS"><a href="#TIPS" class="headerlink" title="TIPS"></a>TIPS</h4><ul>
<li><p>zoo.cfg 注意事项</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">tickTime&#x3D;2000</span><br><span class="line">dataDir&#x3D;&#x2F;var&#x2F;lib&#x2F;zookeeper</span><br><span class="line">dataLogDir&#x3D;&#x2F;var&#x2F;log&#x2F;zookeeper</span><br><span class="line">&#x2F;&#x2F; 客户端访问端口</span><br><span class="line">clientPort&#x3D;2181</span><br><span class="line">initLimit&#x3D;10</span><br><span class="line">syncLimit&#x3D;5</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Server配置中主要部分要使用IP，而不是主机名形式</span><br><span class="line">server.1&#x3D;192.168.1.208:2888:3888</span><br><span class="line">server.2&#x3D;192.168.1.209:2888:3888</span><br><span class="line">server.3&#x3D;192.168.1.207:2888:3888</span><br></pre></td></tr></table></figure>
</li>
<li><p>kafka 的 server.properties</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 在这里定义对外的主机名</span><br><span class="line">advertised.host.name&#x3D;devops2</span><br><span class="line"># The address the socket server listens on. It will get the value returned from</span><br><span class="line"># java.net.InetAddress.getCanonicalHostName() if not configured.</span><br><span class="line">#   FORMAT:</span><br><span class="line">#     listeners &#x3D; security_protocol:&#x2F;&#x2F;host_name:port</span><br><span class="line">#   EXAMPLE:</span><br><span class="line">#     listeners &#x3D; PLAINTEXT:&#x2F;&#x2F;your.host.name:9092</span><br><span class="line">&#x2F;&#x2F; 这里使用IP形式，不要使用主机名</span><br><span class="line">listeners&#x3D;PLAINTEXT:&#x2F;&#x2F;192.168.1.209:9092</span><br></pre></td></tr></table></figure>
</li>
<li><p>ansible-galaxy role 的安装路径</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 我是使用Homebrew安装的ansible，ansbile-galaxy安装的Role放在‘&#x2F;usr&#x2F;local&#x2F;etc&#x2F;ansible&#x2F;roles’目录下</span><br><span class="line">&#x2F;usr&#x2F;local&#x2F;etc&#x2F;ansible&#x2F;roles ls -l</span><br><span class="line">total 0</span><br><span class="line">drwxr-xr-x  14 jiaxi  admin  476 Sep 22 14:55 AnsibleShipyard.ansible-zookeeper</span><br><span class="line">drwxr-xr-x  15 jiaxi  admin  510 Sep 25 16:40 idealista.kafka-role</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><h4 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h4><ul>
<li><a href="https://www.hyperledger.org/projects/fabric" target="_blank" rel="noopener">Hyperledger fabric</a>官方主页</li>
<li><a href="https://kafka.apache.org/" target="_blank" rel="noopener">Apache Kafka</a>网站</li>
<li><a href="http://docs.ansible.com/" target="_blank" rel="noopener">Ansible</a>官方文档</li>
<li><a href="https://zookeeper.apache.org/" target="_blank" rel="noopener">Apache Zookeeper</a>主页</li>
<li><a href="https://galaxy.ansible.com/" target="_blank" rel="noopener">Ansible galaxy</a>网站</li>
<li><a href="https://galaxy.ansible.com/AnsibleShipyard/ansible-zookeeper/" target="_blank" rel="noopener">AnsibleShipyard ansible-zookeeper role</a></li>
<li><a href="https://galaxy.ansible.com/idealista/kafka-role/" target="_blank" rel="noopener">Idealista kafka-role</a></li>
<li><a href="http://www.cnblogs.com/luotianshuai/p/5206662.html" target="_blank" rel="noopener">Mr.心弦 Kafka 集群搭建</a></li>
</ul>
</li>
<li><h4 id="心得"><a href="#心得" class="headerlink" title="心得"></a>心得</h4><p>整个过程还是算顺利，以前没有接触过 Zookeeper 和 Kafka，花了 2 天时间把这个集群搭起来，主要的时候还是花在寻找合适的 ansible Role，还好 Ubuntu 用得比较熟，Ansile 的代码不算难懂，下载的 Role 有时候需要做一些小的改动。</p>
</li>
</ol>

</article>
<ol class="animated rollIn hannah-toc"><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-4"><a class="animated rollIn hannah-toc-link" href="#起因"><span class="animated rollIn hannah-toc-text">起因</span></a></li><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-4"><a class="animated rollIn hannah-toc-link" href="#简介"><span class="animated rollIn hannah-toc-text">简介</span></a></li><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-4"><a class="animated rollIn hannah-toc-link" href="#硬件环境"><span class="animated rollIn hannah-toc-text">硬件环境</span></a></li><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-4"><a class="animated rollIn hannah-toc-link" href="#初始配置"><span class="animated rollIn hannah-toc-text">初始配置</span></a></li><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-4"><a class="animated rollIn hannah-toc-link" href="#关键步骤"><span class="animated rollIn hannah-toc-text">关键步骤</span></a></li><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-4"><a class="animated rollIn hannah-toc-link" href="#测试"><span class="animated rollIn hannah-toc-text">测试</span></a></li><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-4"><a class="animated rollIn hannah-toc-link" href="#TIPS"><span class="animated rollIn hannah-toc-text">TIPS</span></a></li><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-4"><a class="animated rollIn hannah-toc-link" href="#资源"><span class="animated rollIn hannah-toc-text">资源</span></a></li><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-4"><a class="animated rollIn hannah-toc-link" href="#心得"><span class="animated rollIn hannah-toc-text">心得</span></a></li></ol>
<div class="animated bounceInDown paginations">
    <div class="col-md-8 col-md-push-2 col-xs-12">
        <nav>
            
            <a href="/2018/04/13/blockchain/geth-json-rpc/" class="prev col-md-2 col-xs-4 text-left">&larr; Prev</a>
            
            <span
                class="page-content col-md-8  col-xs-4 text-center">
                
            </span>
            
            <a href="/2017/09/04/blockchain/hyperledger-composer-learn/" class="next col-md-2 col-xs-4 text-right">Next &rarr;</a>
            
        </nav>
        <div>
            <div class="col-md-6 col-xs-6 text-left">
                
                以太坊节点geth json rpc使用指南
                
            </div>
            <div class="col-md-6 col-xs-6 text-right">
                
                hyperledger composer 实战
                
            </div>
        </div>
    </div>
</div>

            <!--end body-->
            <!--begin comments-->
            
<div class="comments">
    

    
    
</div>


            <!--end comments-->
        </div>
    </div>

    <!--begin footer-->
    <footer id="footer" class="footer animated fadeInUp hide">
    <p><i class="copy">&copy;</i> 2020 <a href="http://marryton007.github.io">Scheme J</a> All Right Reserved.</p>
    <p>Powered by <a href="http://hexo.io" target="_blank" rel="external nofollow noopener">Hexo</a>. Theme by <a href="https://github.com/objectyan/hexo-theme-hannah" target="_blank" rel="external nofollow noopener">hannah</a></p>
</footer>
    <!--end footer-->

    
    <!-- scripts list from theme config.yml -->
    
    <script src="/js/hannah.js"></script>
    
    
    <!--begin analytics-->
    

    <!--end analytics-->
</body>
<!--end body-->
<!--begin canvas-nest-->
<script>
    var nesturl = "https://unpkg.com/canvas-nest.js/dist/canvas-nest.js";
    var c = document.getElementsByTagName("body")[0] || document.body || document.documentElement;
    var b = document.createElement("script");
    b.setAttribute("type", "text/javascript");
    b.setAttribute("src", nesturl);
    b.setAttribute("color",
        `${ Math.floor(Math.random()*256)},${ Math.floor(Math.random()*256)},${ Math.floor(Math.random()*256)}`);
    b.setAttribute("opacity", Math.random());
    b.setAttribute("count", parseInt((Math.random() * 500) || 99));
    c.appendChild(b)
</script>
<!--end canvas-nest-->

</html>